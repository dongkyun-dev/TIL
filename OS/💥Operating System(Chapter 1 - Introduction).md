# π’¥Operating System(Chapter 1 - Introduction)

---

> λ³Έ λ‚΄μ©μ€ WILEY μ¶νμ‚¬μ—μ„ λ°κ°„ν• μ΄μμ²΄μ  10ν(λ²μ—­λ³Έ)μ„ λ°”νƒ•μΌλ΅ μ‘μ„±ν•μ€μµλ‹λ‹¤.

μ΄μμ²΄μ λ€ κΈ°λ³Έμ μΌλ΅ μ»΄ν“¨ν„° ν•λ“μ›¨μ–΄λ¥Ό κ΄€λ¦¬ν•λ” μ†ν”„νΈμ›¨μ–΄μ΄λ‹¤. μ»΄ν“¨ν„° μ‚¬μ©μ(User)μ™€ μ»΄ν“¨ν„° ν•λ“μ›¨μ–΄(Hardware) μ‚¬μ΄μ— μ„μΉν•λ©° μ¤‘μ¬μ μ—­ν• μ„ μν–‰ν•λ‹¤.

![CSCI 6730 / 4730 Operating Systems Key Questions in System Design](../assets/img/os.png)

μ΄ μ‚¬μ§„μ€ μ΄λ¬ν• μ΄μμ²΄μ μ μ—­ν• μ„ μ λ³΄μ—¬μ¤€λ‹¤. μ΄μμ²΄μ λ” κ·Έ μμ²΄λ΅ μ μ©ν• κΈ°λ¥μ„ μν–‰ν•λ” μ†ν”„νΈμ›¨μ–΄κ°€ μ•„λ‹λ‹¤. μ΄μμ²΄μ λ” λ‹¨μν λ‹¤λ¥Έ ν”„λ΅κ·Έλ¨μ΄ μ μ©ν• μ‘μ—…μ„ ν•  μ μλ” ν™κ²½μ„ μ κ³µν•λ” μ—­ν• μ„ ν•λ‹¤.

---

Modern computer system consists of one or more CPUs and a number of device controllers(ex. Disk Controller, USB Controller). Those are connected by common bus and they shared memory.

μΌλ°μ μΌλ΅ μ΄μμ²΄μ μ—λ” κ° μ¥μΉ μ»¨νΈλ΅¤λ¬λ§λ‹¤ μ¥μΉ λ“λΌμ΄λ²„κ°€ μλ‹¤. μ΄ μ¥μΉ λ“λΌμ΄λ²„λ” μ¥μΉ μ»¨νΈλ΅¤λ¬μ μ‘λ™μ„ μ μ•κ³  μκ³  λ‚λ¨Έμ§€ μ΄μμ²΄μ μ— μ¥μΉμ— λ€ν• μΌκ΄€λ μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ‹¤.

---

### μ΄μμ²΄μ μ λ©ν‘λ” ν¬κ² 3κ°€μ§€λ΅ λ¶„λ¥ν•  μ μλ‹¤.

1. Convenience - It is an interface between User & Hardware.
2. Efficiency -  Allocation of Resources.
3. Both - Management of Memory, Security, etc.

---

###  μ¤‘μ”ν• κ°λ…μΈ Bootstrap program, Interrupt, system callμ— λ€ν• κ°„λ‹¨ν• μ„¤λ…

- #### Bootstrap Program

  > - The initial program that runs when a computer is powered up or rebooted.
  > - It is stored in the ROM(Read-Only-Memory).
  > - It must know how to load the OS and start executing that system.
  > - It must locate and load into Memory the OS kernel.

- #### Interrupt(μ£Όλ΅ Hardwareμ—μ„ λ°μƒ, κµ‰μ¥ν μ¤‘μ”ν• κ°λ…μ΄κΈ° λ•λ¬Έμ— μ•„λμ— μ„¤λ…μ„ μ¶”κ°€ν•κ² μµλ‹λ‹¤.)

  > - The occurrence of an event is usually signaled by an Interrupt from Hardware or Software.
  >
  > - Hardware may trigger an interrupt at anytime by sending a signal to the CPU, usually by the way of the system bus.
  >
  > - Execution Progress 1 
  >
  >   When the CPU is interrupted, it stops what it is doing and immediately transfers execution to a fixed location.(The fixed location usually contains the starting address where the Service Routine of the interrupt is located.)
  >
  > - Execution Progress 2
  >
  >   The Interrupt Service Routine executes. On completion, the CPU resumes the interrupted computation.

- #### System Call(Softwareμ—μ„ λ°μƒ)

  > - Software may trigger an interrupt by executing a special operation called System Call.

---

## π”΄Interrupts

> CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ³  μμ„ λ•, μ…μ¶λ ¥ ν•λ“μ›¨μ–΄ μ¥μΉμ μ”μ²­μ΄λ‚ μμ™Έμƒν™©μ΄ λ°μƒν•μ—¬ μ²λ¦¬κ°€ ν•„μ”ν• κ²½μ° CPUμ—κ² μ•λ ¤μ„ μ²λ¦¬ν•  μ μλ„λ΅ ν•λ” κ²ƒ

<br/>

ν•λ“μ›¨μ–΄λ” μ–΄λ μκ°„μ΄λ“  μ‹μ¤ν… λ²„μ¤λ¥Ό ν†µν•΄ CPUμ— μ‹ νΈλ¥Ό λ³΄λ‚΄ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¬ μ μλ‹¤.

CPUκ°€ μΈν„°λ½νΈ λλ©΄

1. CPUλ” ν•λ μΌμ„ μ¤‘λ‹¨ν•κ³  μ¦‰μ‹ κ³ μ •λ μ„μΉλ΅ μ‹¤ν–‰μ„ μ®κΈ΄λ‹¤.(κ³ μ •λ μ„μΉλ€ μΌλ°μ μΌλ΅ μΈν„°λ½νΈλ¥Ό μ„ν• μ„λΉ„μ¤ λ£¨ν‹΄μ΄ μ„μΉν• μ‹μ‘ μ£Όμ†μ΄λ‹¤.)
2. μΈν„°λ½νΈλ¥Ό μ„ν• μ„λΉ„μ¤ λ£¨ν‹΄μ΄ μ‹¤ν–‰λλ‹¤.
3. μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ μ‹¤ν–‰μ΄ μ™„λ£λλ©΄ CPUλ” μΈν„°λ½νΈ λμ—λ μ—°μ‚°μ„ μ¬κ°ν•λ‹¤.

μ—¬κΈ°μ„ μ¤‘μ”ν• κ²ƒμ€ μΈν„°λ½νΈ λμ—λ μ—°μ‚°μ„ μ¬κ°ν•κΈ° μ„ν•΄μ„λ” ν•΄λ‹Ή μ—°μ‚°μ΄ λ‚¨μ•„μμ–΄μ•Ό ν•λ‹¤λ” κ²ƒμ΄λ‹¤. ν•μ§€λ§, ν„μ¬ CPUλ” μΈν„°λ½νΈλ¥Ό μ„ν• μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν• μ§ν›„μ΄κ³  λ¨λ“  κ°’λ“¤μ΄ μΈν„°λ½νΈλ¥Ό μ„ν• μ„λΉ„μ¤ λ£¨ν‹΄μ— λ§μ¶”μ–΄μ Έ μλ” μƒνƒμ΄λ‹¤.

λ•λ¬Έμ—! λ°λ“μ‹ 1λ² κ³Όμ • μ΄μ „μ— ν„μ¬μ μƒνƒλ¥Ό μ €μ¥ν•΄λ‘μ–΄μ•Ό ν•λ‹¤. μƒνƒλ¥Ό μ €μ¥ν•΄λ‘μ–΄μ•Ό μΈν„°λ½νΈλ¥Ό μ„ν• μ„λΉ„μ¤ λ£¨ν‹΄μ„ μν–‰ν• ν›„, μ €μ¥λμ–΄ μλ λ³µκ·€ μ£Όμ†λ¥Ό ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°μ— μ μ¬ν•κ³ , μΈν„°λ½νΈμ— μν•΄ μ¤‘λ‹¨λμ—λ μ—°μ‚°μ΄ μΈν„°λ½νΈκ°€ λ°μƒν•μ§€ μ•μ•λ κ²ƒμ²λΌ λ‹¤μ‹ μ‹μ‘ν•  μ μλ‹¤.(μ–΄λ–»κ² μ–΄λ””μ— μ €μ¥ν•λ”μ§€λ” μ΄ν›„ μ±•ν„°μ—μ„ λ‚μ¨λ‹¤.)



![Exception and interrupt handling :: Operating systems 2018](../assets/img/exception-and-interrupt-handling-v1.png)

μ΄ μ‚¬μ§„ ν• μ¥μ΄ μΈν„°λ½νΈμ κ³Όμ •μ„ μ μ„¤λ…ν•κ³  μλ‹¤. ν•μ§€λ§, μ΅°κΈ λ” κµ¬μ²΄μ μΌλ΅  μΈν„°λ½νΈλ” λ‹¨μν μ™Έλ¶€μ—μ„λ§ λ°μƒν•μ§€ μ•λ”λ‹¤.

- μ™Έλ¶€ μΈν„°λ½νΈ

> ν•λ“μ›¨μ–΄κ°€ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈ
>
> CPUκ°€ μ•„λ‹ λ‹¤λ¥Έ ν•λ“μ›¨μ–΄ μ¥μΉκ°€ CPUμ— μ”μ²­ν•λ” κ²½μ°
>
> μ•„λ§ μ™Έλ¶€ μΈν„°λ½νΈκ°€ μΌλ° μΈν„°λ½νΈμ λ€λ¶€λ¶„μ„ μ°¨μ§€ν•μ§€ μ•μ„κΉ?

- λ‚΄λ¶€ μΈν„°λ½νΈ

  >CPU λ‚΄λ¶€μ—μ„ μ‹¤ν–‰ν•λ©΄μ„ μΈν„°λ½νΈμ— κ±Έλ¦¬λ” κ²½μ°
  >
  >Divide by Zero, Overflow, Underflow

- μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ

  > μ†ν”„νΈμ›¨μ–΄κ°€ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈ
  >
  > μμ™Έμƒν™©, system call

  <br/>

  `+` μΈν„°λ½νΈ κΈ°λ²•μ—λ” μ°μ„ μμ„ λ λ²¨λ„ μ΅΄μ¬ν•λ‹¤κ³  ν•λ‹¤. μ°μ„ μμ„κ°€ λ†’μ€ μΈν„°λ½νΈλ¥Ό λ¨Όμ € μ²λ¦¬ν•  μλ„, μ°μ„ μμ„κ°€ λ‚®μ€ μΈν„°λ½νΈλ¥Ό λ¦κ² μ²λ¦¬ν•  μλ„ μλ‹¤.

  <br/>

  <br/>

  **μ”μ•½ν•λ©΄, μΈν„°λ½νΈλ” μµμ‹  μ΄μμ²΄μ μ—μ„ λΉ„λ™κΈ° μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄ μ‚¬μ©λλ‹¤. μ¥μΉ μ»¨νΈλ΅¤λ¬ λ° ν•λ“μ›¨μ–΄ μ¤λ¥λ΅ μΈν•΄ μΈν„°λ½νΈκ°€ λ°μƒν•λ‹¤. κ°€μ¥ κΈ΄κΈ‰ν• μ‘μ—…μ„ λ¨Όμ € μν–‰ν•κΈ° μ„ν•΄ μµμ‹  μ»΄ν“¨ν„°λ” μΈν„°λ½νΈ μ°μ„ μμ„ μ‹μ¤ν…μ„ μ‚¬μ©ν•λ‹¤. μΈν„°λ½νΈλ” μ‹κ°„μ— λ―Όκ°ν• μ²λ¦¬μ— λΉλ²ν•κ² μ‚¬μ©λλ―€λ΅ μ‹μ¤ν… μ„±λ¥μ„ μΆ‹κ² ν•λ ¤λ©΄ ν¨μ¨μ μΈ μΈν„°λ½νΈ μ²λ¦¬κ°€ ν•„μ”ν•λ‹¤.**

---

## π”΄DMA(Direct Memory Access)

> κΈ°λ³ΈμΌλ΅ μ•μ•„μ•Ό ν•λ” λ‚΄μ©
>
> 1. OS μ½”λ“λ” λ§μ€ λ¶€λ¶„λ“¤μ΄ I/Oλ¥Ό manage ν•λ”λ° ν• λ‹Ήλλ‹¤. μ™λƒν•λ©΄,  I/Oμ reliability(μ‹ λΆ°μ„±)μ™€ performance(μ„±λ¥)μ΄ μ¤‘μ”ν•κ³ , I/O λ””λ°”μ΄μ¤μ μΆ…λ¥κ°€ κµ‰μ¥ν λ‹¤μ–‘ν•κΈ° λ•λ¬Έ
> 2. Each device controller is in charge of a specific type of device. (Device controller maintains load storage buffer and set of special purpose registers.)
> 3. Typically OS has a device driver for each device controller.

<br/>

μ„μ— μ–ΈκΈ‰ν• interruptλ¥Ό ν†µν• I/Oλ” μ†λ‰μ λ°μ΄ν„°μΌ λ•λ” κ΄μ°®μ§€λ§, λ€λ‰μ λ°μ΄ν„° μ΄λ™ μ‹μ—λ” κµ‰μ¥ν λ†’μ€ μ¤λ²„ν—¤λ“λ¥Ό λ°μƒμ‹ν‚¬ μ μλ‹¤.(λ‹Ήμ—°ν•μ§€ ν• λ°”μ΄νΈλ§λ‹¤ μΈν„°λ½νΈκ°€ λ°μƒν•  κ²ƒμ΄κ³  μΈν„°λ½νΈ μμ²΄κ°€ pure overheadμ΄λ‹¤.)

μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ DMAκ°€ μ‚¬μ©λλ‹¤.  

DMAλ” λΈ”λ΅λ§λ‹¤ λ”± 1λ²μ μΈν„°λ½νΈκ°€ λ°μƒν•λ‹¤.(λ””λ°”μ΄μ¤ λ“λΌμ΄λ²„μ λ™μ‘μ΄ μ™„λ£ λμ—μ„ λ•)

μΈν„°λ½νΈλ¥Ό κ±°λ” νμκ°€ μ›”λ“±ν μ μ–΄μ§€κ³  λ””λ°”μ΄μ¤μ™€ λ©”λ¨λ¦¬κ°€ μ§μ ‘μ μΌλ΅ λ°μ΄ν„°λ¥Ό transferν•κΈ° λ•λ¬Έμ— CPUλ” κ·Έλ™μ• λ‹¤λ¥Έ μΌμ„ μ²λ¦¬ν•  μ μλ‹¤.

![DMA](../assets/img/DMA.png)

---

![μ‹¬μ‹¬ν•΄μ„ ν•λ” λΈ”λ΅κ·Έ :: [μ»΄ν“¨ν„° κµ¬μ΅°] μΊμ‹ λ©”λ¨λ¦¬(Cache)μ™€ λ§¤ν•‘ λ°©λ²•](../assets/img/mapping.png)

λΈ”λ΅μ΄λ€ λ©”λ¨λ¦¬μ—μ„ μΊμ‰¬λ΅ μ΄λ™ν•λ” λ°μ΄ν„°μ λ‹¨μ„μ΄λ‹¤.

---

### μ΅°κΈ λ” μ‹¬ν™”λ μλ¬Έ. OSλ” μ–΄λ–¤ λ””λ°”μ΄μ¤λ“¤μ΄ μ—°κ²°λμ–΄ μλ”μ§€ μ–΄λ–»κ² μ•κ³  μλ” κ²ƒμΌκΉ?

κΈ°λ³Έμ μΌλ΅ I/O  λ””λ°”μ΄μ¤λ” I/O ν¬νΈμ— μν•΄ λ¨Έμ‹ μ— μ—°κ²°λλ‹¤. λ””λ°”μ΄μ¤λ” μμ‹ λ§μ λ””λ°”μ΄μ¤ μ»¨νΈλ΅¤λ¬λ¥Ό κ°–λ”λ‹¤. λ””λ°”μ΄μ¤ μ»¨νΈλ΅¤λ¬λ” I/O machineκ³Ό OS, κ·Έ μ¤‘κ°„μ— μ„μΉν• ν•λ“μ›¨μ–΄μ΄λ‹¤.

OSκ°€ I/O λ””λ°”μ΄μ¤ μ΅°μ‘μ„ μ„ν•΄ CPUμ— Instructionsλ¥Ό λ³΄λ‚Έλ‹¤. κ·Έλ¬λ©΄ μ΄ CPUλ” μ΄ I/O λ””λ°”μ΄μ¤λ“¤μ— μ‹κ·Έλ„μ„ λ³΄λ‚Έλ‹¤.(λ””λ°”μ΄μ¤ μ»¨νΈλ΅¤λ¬λ¥Ό ν†µν•΄) κ·Έλ ‡λ‹¤λ©΄ OSλ” μ–΄λ–¤ λ””λ°”μ΄μ¤λ“¤μ΄ μ—°κ²°λμ–΄ μλ”μ§€, λ””λ°”μ΄μ¤ workingμ„ μ„ν•΄ μ–΄λ–¤ instructionsλ¥Ό λ³΄λ‚΄μ•Ό ν•λ”μ§€ μ–΄λ–»κ² μ•κ³  μλ” κ²ƒμΌκΉ.

=> manufactureκ°€ λ””λ°”μ΄μ¤λ¥Ό λ§λ“¤ λ• `λ””λ°”μ΄μ¤ ν”„λ΅κ·Έλ¨` λν• κ°™μ΄ λ°°ν¬ν•κ² λλ‹¤. μ΄ λ•λ¬Έμ— OSμ—λ” λ””λ°”μ΄μ¤μ— λ€ν• μ •λ³΄λ“¤μ΄ μ „ν€ μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤. λ”°λΌμ„, OSκ°€ λ””λ°”μ΄μ¤μ™€ μƒνΈμ‘μ©ν•  μ μλ” μ μΌν• μλ‹¨μ€ μ΄κ²ƒμ `λ””λ°”μ΄μ¤ ν”„λ΅κ·Έλ¨`μ„ ν†µν•΄μ„ μ΄λ‹¤. λ§μ€ μ΄μ‹¬μλ“¤μ΄ μΌλ‹¨ λ“λΌμ΄λ²„κ°€ μ„¤μΉλ§ λλ©΄ OSλ” λ””λ°”μ΄μ¤μ λ¨λ“  μ •λ³΄λ¥Ό μ΄ν•΄ν•λ‹¤κ³  μƒκ°ν•λ‹¤. ν•μ§€λ§, μ΄κ²ƒμ€ μ‚¬μ‹¤μ΄ μ•„λ‹κ³ , λ“λΌμ΄λ²„λ” OSμ ν• λ¶€λ¶„μ΄ μ λ€ λ  μ μ—†λ‹¤. κ²°κµ­ λ“λΌμ΄λ²„ ν”„λ΅κ·Έλ¨μ΄ instructionsμ„ λ³΄λ‚΄κ³  λ””λ°”μ΄μ¤λ΅λ¶€ν„° λ°μ΄ν„°λ¥Ό λ°›μΌλ©΄ λ“λΌμ΄λ²„ ν”„λ΅κ·Έλ¨μ΄ κ·Έ μ •λ³΄λ¥Ό OSμ— μ „λ‹¬ν•λ” μ‹μ ν”λ΅μ°μ΄λ‹¤. OSμ™€ λ“λΌμ΄λ²„ κ°„μ μ†ν†µμ€ κµ‰μ¥ν κ°„λ‹¨ν•κ² μ΄λ£¨μ–΄μ§€λ”λ° λ‘λ‹¤ λ©”λ¨λ¦¬μ—μ„ load λλ” κ²ƒλ“¤μ΄κΈ° λ•λ¬Έμ΄λ‹¤. λ“λΌμ΄λ²„λ” λ©”λ¨λ¦¬ κ³µκ°„μ—μ„ μ¤λ«λ™μ• μ΅΄μ¬ν•λ” **daemon program**μ΄λΌ μƒκ°ν•  μ μλ‹¤. μ΄λ¬ν• μ΄μ λ“¤ λ•λ¬Έμ— λ“λΌμ΄λ²„ ν”„λ΅κ·Έλ¨μ΄ crash λμλ§μ I/O λ””λ°”μ΄μ¤μ λ™μ‘μ΄ λ©μ¶”λ” κ²ƒμ΄λ‹¤.

**μ„μ λ‚΄μ©μ€ κµ‰μ¥ν μ‹¬ν™”λ λ‚΄μ©μ΄λ©΄ λ‚ λν• λ¶€λ¶„λ¶€λ¶„ μ΄ν•΄ν•μ§€ λ»ν• λ‚΄μ©λ“¤μ΄ λ§λ‹¤. μ–Έμ  κ°€ μ‹¤λ ¥μ΄ μ¬λΌμ„ μ΄ λ‚΄μ©μ„ μ΄ν•΄ν•  μ μλ” μκ°„μ΄ μ¤μ§€ μ•μ„κΉλΌλ” μƒκ°μ— μΌλ‹¨ μ μ–΄λ‘”λ‹¤.**

---

##  Storage Structure

<br/>

![storage_structure](../assets/img/storage_structure.png)



- μΊμ‰¬ - SRAM  λ©”μΈ λ©”λ¨λ¦¬ - DRAM  ν•λ“λ””μ¤ν¬ - HDD

- λ²”μ© μ»΄ν“¨ν„°λ” ν”„λ΅κ·Έλ¨ λ€λ¶€λ¶„μ„ λ©”μΈ λ©”λ¨λ¦¬(randim-access-memory λλ” RAM μ΄λΌ λ¶€λ¥Έλ‹¤)λΌ λ¶λ¦¬λ” μ¬κΈ°λ΅ κ°€λ¥ν• λ©”λ¨λ¦¬μ—μ„ κ°€μ Έμ¨λ‹¤. λ©”μΈ λ©”λ¨λ¦¬λ” dynamic random-access memory(DRAM)μ΄λΌ λ¶λ¦¬λ” λ°λ„μ²΄ κΈ°μ λ΅ κµ¬ν„ν•λ‹¤.
- μΊμ‰¬λ” CPU μ†μ— λ“¤μ–΄κ°€ μλ‹¤.
- λ³΄ν†µ λΉ„νλ°μ„± μ €μ¥μ¥μΉ μ „λ¶€λ¥Ό `DISK`λ΅ ν‘ν„ν•λ‹¤.(μ΄κ±΄ μ •ν™•ν•μ§€ μ•μ„ μ μλ‹¤. κ·Όλ° λ³΄ν†µ κ·Έλ° μ‹μΌλ΅ λ‹¤λ“¤ κ·Έλ¦Όμ„ κ·Έλ¦¬λ” κ²ƒ κ°™λ‹¤.)

---

